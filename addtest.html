<!DOCTYPE html>
<html>
  <head>
    <title>Barcode Scanner</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
  </head>
  <body>
    <label for="barcode">Scan Barcode:</label>
    <input type="text" id="barcode">
    <button id="scanBtn">Scan</button>
    <div id="productInfo"></div>
    <script>
      // Load the Google Sheets API client
        gapi.load('client', initClient);

        // Initialize the API client and authorize it to access your Google Sheets account
        function initClient() {
        gapi.client.init({
            apiKey: 'YOUR_API_KEY',
            clientId: 'YOUR_CLIENT_ID',
            discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
            scope: 'https://www.googleapis.com/auth/spreadsheets'
        }).then(function() {
            console.log('Google Sheets API client initialized');
            // Your code to use the API goes here
        }, function(error) {
            console.error('Error initializing Google Sheets API client', error);
        });
        }

                    // Add an event listener to the Scan button
            $('#scanBtn').click(function() {
            const barcode = $('#barcode').val();
            getProductInfo(barcode);
            });

    // Function to get product information from Open Food Facts and save it to Google Sheets
    function getProductInfo(barcode) {
    $.get(`https://world.openfoodfacts.org/api/v0/product/${barcode}.json`, function(data) {
        const productName = data.product.product_name;
        const productDescription = data.product.ingredients_text;
        const productImage = data.product.image_url;
        saveToGoogleSheets(barcode, productName, productDescription);
    });
    }

    // Function to save product information to Google Sheets
    function saveToGoogleSheets(barcode, productName, productDescription) {
    const spreadsheetId = 'YOUR_SPREADSHEET_ID';
    const range = 'Sheet1!A1:C1';
    const valueInputOption = 'USER_ENTERED';
    const values = [
        [barcode, productName, productDescription]
    ];
    gapi.client.sheets.spreadsheets.values.append({
        spreadsheetId: spreadsheetId,
        range: range,
        valueInputOption: valueInputOption,
        resource: {
        values: values
        }
    }).then(function(response) {
        console.log('Barcode, Product Name, and Product Description saved to Google Sheets');


    </script>
  </body>
</html>
